<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TransferWise Bank</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 text-slate-900">

<!-- LOGIN PAGE -->
<div id="loginPage" class="max-w-md mx-auto p-8 mt-20 bg-white rounded-2xl shadow text-center">
  <h1 class="text-2xl font-bold mb-4">TransferWise</h1>
  <p class="mb-4 text-slate-600">Enter any username/password to continue</p>
  <input id="username" type="text" placeholder="Username" class="w-full mb-3 p-2 border rounded-lg" />
  <input id="password" type="password" placeholder="Password" class="w-full mb-3 p-2 border rounded-lg" />
  <button onclick="login()" class="w-full py-2 bg-blue-600 text-white rounded-lg font-semibold">Login</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden max-w-4xl mx-auto p-4 sm:p-8">

  <!-- Live greeting and time -->
  <div class="mb-4 text-center">
    <h2 id="greeting" class="text-lg font-semibold"></h2>
    <div id="currentTime" class="text-slate-500 text-sm"></div>
  </div>

  <div class="mb-6 text-center">
    <h1 class="text-2xl font-bold">TransferWise</h1>
  </div>

  <div class="grid md:grid-cols-3 gap-4 mb-6">
    <div class="p-4 bg-white rounded-2xl shadow">
      <div class="text-sm text-slate-500">Available Balance</div>
      <div id="balance" class="mt-1 text-3xl font-semibold">€150,000.00</div>
    </div>
    <div class="p-4 bg-white rounded-2xl shadow">
      <div class="text-sm text-slate-500">Savings</div>
      <div class="mt-1 text-3xl font-semibold">€50,000.00</div>
    </div>
    <div class="p-4 bg-white rounded-2xl shadow">
      <div class="text-sm text-slate-500">Pending Transactions</div>
      <div id="pending" class="mt-1 text-3xl font-semibold">€0.00</div>
    </div>
  </div>

  <div class="bg-white p-4 rounded-2xl shadow mb-6">
    <div class="mb-2 font-semibold">New Transaction</div>
    <label class="block mb-2">
      Amount (€)
      <input id="transAmount" type="number" min="1" class="w-full p-2 border rounded-lg" />
    </label>
    <label class="block mb-2">
      Method
      <select id="transMethod" onchange="showAccountInput()" class="w-full p-2 border rounded-lg">
        <option>PayPal</option>
        <option>Revolut</option>
      </select>
    </label>
    <div id="accountInput" class="mb-2 hidden">
      <label class="block mb-2">
        Enter Account / Email
        <input id="accountDetails" type="text" class="w-full p-2 border rounded-lg" placeholder="e.g. paypal@example.com" />
      </label>
    </div>
    <div class="flex gap-2">
      <button onclick="withdraw()" class="mt-2 flex-1 py-2 bg-red-600 text-white rounded-lg font-semibold">Withdraw</button>
      <button onclick="transfer()" class="mt-2 flex-1 py-2 bg-green-600 text-white rounded-lg font-semibold">Transfer</button>
    </div>
  </div>

  <div class="bg-white rounded-2xl shadow overflow-hidden">
    <div class="px-4 py-3 border-b">
      <h2 class="font-semibold">Recent Transactions</h2>
    </div>
    <table class="w-full text-sm">
      <thead class="bg-slate-50">
        <tr>
          <th class="text-left px-4 py-2">Date</th>
          <th class="text-left px-4 py-2">Description</th>
          <th class="text-right px-4 py-2">Amount</th>
          <th class="text-right px-4 py-2">Status</th>
        </tr>
      </thead>
      <tbody id="transactions">
        <tr class="border-t">
          <td class="px-4 py-2">2025-08-29</td>
          <td class="px-4 py-2">Initial Deposit</td>
          <td class="px-4 py-2 text-right">€150,000.00</td>
          <td class="px-4 py-2 text-right">
            <span class="px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs">Complete</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- TRANSACTION COMPLETE PAGE -->
<div id="completePage" class="hidden max-w-md mx-auto p-8 mt-20 bg-white rounded-2xl shadow text-center">
  <h1 class="text-2xl font-bold mb-4">Transaction Complete ✅</h1>
  <p class="text-slate-600" id="completeDetails"></p>
</div>

<script>
let balance = 150000;
let pendingAmount = 0;
let loggedUser = "";

// format money
function formatMoney(num){
  return "€" + num.toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2});
}

// login
function login(){
  loggedUser = document.getElementById("username").value || "User";
  document.getElementById("loginPage").classList.add("hidden");
  document.getElementById("dashboard").classList.remove("hidden");
  updateLiveDashboard();
}

// show account input
function showAccountInput(){
  document.getElementById("accountInput").classList.remove("hidden");
}

// transaction helper
function handleTransaction(action){
  const amount = parseFloat(document.getElementById("transAmount").value);
  const method = document.getElementById("transMethod").value;
  const account = document.getElementById("accountDetails").value;

  if(!amount || amount <=0 || amount>balance){
    alert("Invalid amount");
    return false;
  }
  if(!account){
    alert("Enter account/email");
    return false;
  }

  balance -= amount;
  pendingAmount += amount;
  document.getElementById("balance").textContent = formatMoney(balance);
  document.getElementById("pending").textContent = formatMoney(pendingAmount);

  const date = new Date().toISOString().split("T")[0];
  const rowId = "tx"+Date.now();
  const row = `<tr id="${rowId}" class="border-t">
    <td class="px-4 py-2">${date}</td>
    <td class="px-4 py-2">${action} via ${method} (${account})</td>
    <td class="px-4 py-2 text-right">€${amount.toFixed(2)}</td>
    <td class="px-4 py-2 text-right"><span id="status${rowId}" class="px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs">Pending</span></td>
  </tr>`;
  document.getElementById("transactions").insertAdjacentHTML("afterbegin", row);

  document.getElementById("dashboard").classList.add("hidden");
  document.getElementById("completePage").classList.remove("hidden");
  document.getElementById("completeDetails").textContent = `€${amount.toFixed(2)} ${action} via ${method} to ${account} (Pending...)`;

  // simulate approval after 2 sec
  setTimeout(()=>{
    document.getElementById("status"+rowId).textContent="Complete";
    document.getElementById("status"+rowId).className="px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs";
    pendingAmount -= amount;
    document.getElementById("pending").textContent = formatMoney(pendingAmount);
    document.getElementById("completePage").classList.add("hidden");
    document.getElementById("dashboard").classList.remove("hidden");
    document.getElementById("transAmount").value="";
    document.getElementById("accountDetails").value="";
  },2000);
}

// Withdraw
function withdraw(){ handleTransaction("Withdraw"); }

// Transfer
function transfer(){ handleTransaction("Transfer"); }

// live greeting and clock
function updateLiveDashboard(){
  const now = new Date();
  const hours = now.getHours();
  let greet = "Hello";
  if(hours<12) greet="Good Morning";
  else if(hours<18) greet="Good Afternoon";
  else greet="Good Evening";

  if(loggedUser) document.getElementById("greeting").textContent = `${greet}, ${loggedUser}!`;
  document.getElementById("currentTime").textContent = now.toLocaleString();
}
setInterval(updateLiveDashboard,1000);
</script>

</body>
</html>
